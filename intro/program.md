![cover](https://img3.doubanio.com/view/subject/l/public/s28047380.jpg)

    作者: [日] 矢泽久雄 
    出版社: 人民邮电出版社
    译者: 李逢俊 
    出版年: 2015-4
    页数: 272
    定价: 39.00元
    装帧: 平装
    丛书: 图灵程序设计丛书
    ISBN: 9787115385130

[豆瓣链接](https://book.douban.com/subject/26365491/)

- [1.对程序员来说CPU是什么](#1%e5%af%b9%e7%a8%8b%e5%ba%8f%e5%91%98%e6%9d%a5%e8%af%b4cpu%e6%98%af%e4%bb%80%e4%b9%88)
  - [1.1 CPU的内部结构解析](#11-cpu%e7%9a%84%e5%86%85%e9%83%a8%e7%bb%93%e6%9e%84%e8%a7%a3%e6%9e%90)
  - [1.2 CPU是寄存器的集合体](#12-cpu%e6%98%af%e5%af%84%e5%ad%98%e5%99%a8%e7%9a%84%e9%9b%86%e5%90%88%e4%bd%93)
  - [1.3 决定程序流程的程序计数器](#13-%e5%86%b3%e5%ae%9a%e7%a8%8b%e5%ba%8f%e6%b5%81%e7%a8%8b%e7%9a%84%e7%a8%8b%e5%ba%8f%e8%ae%a1%e6%95%b0%e5%99%a8)
  - [1.4 条件分支和循环机制](#14-%e6%9d%a1%e4%bb%b6%e5%88%86%e6%94%af%e5%92%8c%e5%be%aa%e7%8e%af%e6%9c%ba%e5%88%b6)
  - [1.5 函数的调用机制](#15-%e5%87%bd%e6%95%b0%e7%9a%84%e8%b0%83%e7%94%a8%e6%9c%ba%e5%88%b6)
  - [1.6 通过地址和索引实现数组](#16-%e9%80%9a%e8%bf%87%e5%9c%b0%e5%9d%80%e5%92%8c%e7%b4%a2%e5%bc%95%e5%ae%9e%e7%8e%b0%e6%95%b0%e7%bb%84)
  - [1.7 CPU的处理其实很简单](#17-cpu%e7%9a%84%e5%a4%84%e7%90%86%e5%85%b6%e5%ae%9e%e5%be%88%e7%ae%80%e5%8d%95)
- [2.数据是用二进制数表示的](#2%e6%95%b0%e6%8d%ae%e6%98%af%e7%94%a8%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%95%b0%e8%a1%a8%e7%a4%ba%e7%9a%84)

## 1.对程序员来说CPU是什么
### 1.1 CPU的内部结构解析
有的 CPU 在一个集成电路中集成了两个 CPU 芯片，我们称之为`双核（dual core）CPU`。

![](program1.png)

图 1-1　程序运行流程示例

CPU 和内存是由许多晶体管组成的电子部件，通常称为 `IC（Integrated Circuit，集成电路）`。从功能方面来看，如图 1-2 所示，CPU 的内部由`寄存器`、`控制器`、`运算器`和`时钟`四个部分构成，各部分之间由电流信号相互连通。

- `寄存器`可用来暂存指令、数据等处理对象，可以将其看作是内存的一种。根据种类的不同，一个 CPU 内部会有 20～100 个寄存器。
- `控制器`负责把内存上的指令、数据等读入寄存器，并根据指令的执行结果来控制整个计算机。
- `运算器`负责运算从内存读入寄存器的数据。
- `时钟`负责发出 CPU 开始计时的时钟信号。Pentium 2 GHz 表示时钟信号的频率为 2 GHz（1 GHz = 10 亿次 / 秒）。也就是说，时钟信号的频率越高，CPU 的运行速度越快。

![](program2.png)

图 1-2　CPU 的四个构成部分

通常所说的内存指的是计算机的`主存储器（main memory）` ，简称主存。主存通过控制芯片等与 CPU 相连，主要负责存储指令和数据。

主存位于计算机机体内部，是负责存储程序、数据等的装置。主存通常使用 `DRAM（Dynamic Random Access Memory，动态随机存取存储器）`芯片。DRAM 可以对任何地址进行数据的读写操作，但需要保持稳定的电源供给并时常刷新（确保是最新数据），关机后内容将自动清除。

### 1.2 CPU是寄存器的集合体
程序是把寄存器作为对象来描述的。

`汇编语言`采用助记符（memonic）来编写程序，每一个原本是电气信号的机器语言指令都会有一个与其相应的助记符，助记符通常为指令功能的英语单词的简写。通常我们将汇编语言编写的程序转化成机器语言的过程称为`汇编`；反之，机器语言程序转化成汇编语言程序的过程则称为`反汇编`。

把汇编语言转化成机器语言的程序称为`汇编器（assembler）`。

- `机器语言`是指CPU能直接解释和执行的语言。
- `高级编程语言`是指能够使用类似于人类语言（主要是英语）的语法来记述的编程语言的总称。

`编译`是指将使用高级编程语言编写的程序转换为机器语言的过程，其中，用于转换的程序被称为`编译器（compiler）`。

表 1-1　寄存器 的主要种类和功能

种类 | 功能
---|---
累加寄存器（accumulator register） | 存储执行运算的数据和运算后的数据
标志寄存器（flag register）| 存储运算处理后的CPU的状态
程序计数器（program counter） | 存储下一条指令所在内存的地址
基址寄存器（base register）| 存储数据内存的起始地址
变址寄存器（index register） | 存储基址寄存器的相对地址
通用寄存器（general purpose register） | 存储任意数据
指令寄存器（instruction register） | 存储指令。CPU内部使用，程序员无法通过程序对该寄存器进行读写操作
栈寄存器（stack register） | 存储栈区域的起始地址

对程序员来说，CPU 是具有各种功能的寄存器的集合体。其中，程序计数器、累加寄存器、标志寄存器、指令寄存器和栈寄存器都只有一个，其他的寄存器一般有多个。

![](program3.png)

图 1-3　程序员眼中的 CPU（CPU 是寄存器的集合体）

### 1.3 决定程序流程的程序计数器
图 1-4 是程序起动时内存内容的模型。示例中的程序实现的是将 123 和 456 两个数值相加，并将结果输出到显示器上。

`操作系统（operating system）`是指管理和控制计算机硬件与软件资源的计算机程序

![](program4.png)

图 1-4　内存中配置的程序示例（显示相加的结果）

### 1.4 条件分支和循环机制
程序的流程分为顺序执行、条件分支和循环三种。

- `顺序执行`是指按照地址内容的顺序执行指令。
- `条件分支`是指根据条件执行任意地址的指令。
- `循环`是指重复执行同一地址的指令。

条件分支和循环中使用的跳转指令 ，会参照当前执行的运算结果来判断是否跳转。表 1-1 所列出的寄存器中，我们提到了标志寄存器。无论当前累加寄存器的运算结果是负数、零还是正数，标志寄存器都会将其保存（也负责存放溢出和奇偶校验的结果)。

- `溢出（overflow）`是指运算的结果超出了寄存器的长度范围。
- `奇偶校验（parity check）`是指检查运算结果的值是偶数还是奇数。

![](program5.png)

图 1-6　比较运算的结果存储在标志寄存器的三个位中

### 1.5 函数的调用机制
![](program6.png)

图 1-7　程序调用函数示例（这里直接展示了 C 语言的源代码，实际上各地址存储的应该是变换成机器语言后的程序）

`call指令`会把调用函数后要执行的指令地址存储在名为栈的主存内。函数处理完毕后，再通过函数的出口来执行return命令。`return命令`的功能是把保存在栈中的地址设定到程序计数器中。

![](program7.png)

图 1-8　函数调用中程序计数器和栈的职能

在编译高级编程语言的程序后，函数调用的处理会转换成 call 指令，函数结束的处理则会转换成 return 指令。

### 1.6 通过地址和索引实现数组
`基址寄存器`和`变址寄存器`。通过这两个寄存器，我们可以对主内存上特定的内存区域进行划分，从而实现类似于数组的操作。

- `数组`是指同样长度的数据在内存中进行连续排列的数据构造。用一个数组名来表示全体数据，通过索引来区分数组的各个数据（元素）。

![](program8.png)

图 1-9　综合使用地址和索引来决定实际地址

### 1.7 CPU的处理其实很简单
表 1-2　机器 语言指令的主要类型和功能

类型 | 功能
---|---
数据转送指令 | 寄存器和内存、内存和内存、寄存器和外围设备之间的数据读写操作
运算指令 | 用累加寄存器执行算术运算、逻辑运算、比较运算和移位运算
跳转指令 | 实现条件分支、循环、强制跳转等
call/return指令 | 函数的调用/返回调用前的地址

- `外围设备`指的是连接到计算机的键盘、鼠标、显示器、设备装置、打印机等。

## 2.数据是用二进制数表示的





